
<style>
  .product-tabs-section {
    display: flex;
  }
  .tabs-container {
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  #shirt-collection-sec-iii {
    display: flex;
    justify-content: center;
    align-items: center;
}
  .tab-button {
    padding: 10px;
    cursor: pointer;
    border: none;
    background-color: #f0f0f0;
    margin-bottom: 5px;
    text-align: left;
  }
  .tab-button.active {
    background-color: #d0d0d0;
  }
  .products-container {
    flex: 3;
    padding: 20px;
    border-left: 1px solid #ddd;
  }
  .products-list {
    
     position: absolute;
  visibility: hidden;
  opacity: 0;
  transition: visibility 0s, opacity 0.5s linear;
  }
  .products-list.active {
    position: relative;
  visibility: visible;
  opacity: 1;
    
  }
  .product-item {
    margin-bottom: 20px;
  }
  .product-item img {
    max-width: 100%;
  }
  .product-item h3 {
    margin: 10px 0;
  }
</style>
{%   comment %}
<div class="product-tabs-section">
  <div class="tabs-container">
    {% for block in section.blocks %}
      <button class="tab-button" data-collection-handle="{{ block.settings.collection_handle }}">{{ block.settings.tab_title }}</button>
    {% endfor %}
  </div>
  <div class="products-container">
    {% for block in section.blocks %}
      <div class="products-list" id="{{ block.settings.collection_handle }}">
        {% assign collection = collections[block.settings.collection_handle] %}
        {% if collection %}
          {% for product in collection.products %}
            <div class="product-item">
              <img src="{{ product.featured_image | img_url: 'medium' }}" alt="{{ product.title }}">
              <h3>{{ product.title }}</h3>
              <p>{{ product.price | money }}</p>
              <a href="{{ product.url }}" class="btn">View Product</a>
            </div>
          {% endfor %}
        {% else %}
          <p>No products found in this collection.</p>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>
{% endcomment %}
<div class="product-tabs-section">
  <div class="tabs-container">
    {% for block in section.blocks %}
      <button class="tab-button" data-collection-handle="{{ block.settings.collection_handle }}">{{ block.settings.tab_title }}</button>
    {% endfor %}
  </div>
  <div class="products-container">
    {% for block in section.blocks %}
      <div class="products-list" id="{{ block.settings.collection_handle }}">
        {% assign collection = collections[block.settings.collection_handle] %}
        {% if collection %}
          {% for product in collection.products limit: 4 %}
            <div class="product-item">
              <img src="{{ product.featured_image | img_url: 'medium' }}" alt="{{ product.title }}">
              <h3>{{ product.title }}</h3>
              <p>{{ product.price | money }}</p>
              <div class="product-tags">
                {% for tag in product.tags %}
                  <span class="tag">{{ tag }}</span>
                {% endfor %}
              </div>
              <div class="product-reviews">
                {% if product.metafields.reviews.rating %}
                  <span class="rating">
                    {% for i in (1..5) %}
                      {% if product.metafields.reviews.rating >= i %}
                        ★
                      {% else %}
                        ☆
                      {% endif %}
                    {% endfor %}
                  </span>
                  <span class="review-count">({{ product.metafields.reviews.count }} Reviews)</span>
                {% endif %}
              </div>
              <a href="/cart/add" class="btn add-to-cart" data-product-id="{{ product.id }}">Add to Cart</a>
              <a href="{{ product.url }}" class="btn">View Product</a>
            </div>
          {% endfor %}
        {% else %}
          <p>No products found in this collection.</p>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var tabs = document.querySelectorAll('.tab-button');
    var productLists = document.querySelectorAll('.products-list');

    tabs.forEach(function(tab) {
      tab.addEventListener('click', function() {
        tabs.forEach(function(t) { t.classList.remove('active'); });
        tab.classList.add('active');

        var collectionHandle = tab.getAttribute('data-collection-handle');
        productLists.forEach(function(list) {
          if (list.id === collectionHandle) {
            list.classList.add('active');
          } else {
            list.classList.remove('active');
          }
        });
      });
    });

    // Activate the first tab and product list by default
    if (tabs.length > 0) {
      tabs[0].classList.add('active');
      productLists[0].classList.add('active');
    }
  });
</script>

{% schema %}
{
  "name": "improve tabs",
  "settings": [
        {
          "type": "text",
          "id": "sec_title",
          "label": "section Title"
        }
  ],
  "blocks": [
    {
      "type": "tab",
      "name": "Tab",
      "settings": [
        {
          "type": "text",
          "id": "tab_title",
          "label": "Tab Title"
        },
        {
          "type": "collection",
          "id": "collection_handle",
          "label": "Select Collection"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "improve tabs"
    }
  ]
}
{% endschema %}